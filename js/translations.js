// Translations for Weed.cz
const TRANSLATIONS = {
  cs: {
    // Header
    'site_tagline': '🌿 Kompletní databáze 144+ cannabis lokací v České republice',
    'search_placeholder': 'Hledat obchody, produkty, města...',
    'btn_regions': 'Regiony',
    'btn_categories': 'Kategorie',
    
    // Navigation
    'nav_home': 'Domů',
    'nav_regions': 'Regiony',
    'nav_categories': 'Kategorie',
    'nav_cbd_shops': 'CBD Obchody',
    'nav_seed_banks': 'Seed Banky',
    'nav_grow_shops': 'Grow Shopy',
    'nav_medical': 'Lékárny',
    'nav_blog': 'Blog',
    'section_blog': '📝 Cannabis Průvodce',
    'section_blog_subtitle': 'Komplexní články o konopí v České republice',
    'btn_all_articles': 'Všechny články',
    
    // Homepage
    'hero_title': '🌿 Najděte Cannabis v České Republice',
    'hero_subtitle': 'Kompletní adresář CBD obchodů, seed banků, grow shopů, lékáren a cannabis služeb',
    'btn_browse_regions': 'Procházet podle regionů',
    'btn_browse_categories': 'Procházet podle kategorií',
    'stat_total': 'Celkem lokací',
    'stat_cbd': 'CBD Obchody',
    'stat_ecommerce': 'E-commerce',
    'stat_seeds': 'Seed & Grow',
    'section_latest': 'Nejnovější přidané',
    'section_latest_subtitle': 'Objevte nejnovější cannabis obchody a služby',
    'btn_show_all': 'Zobrazit všechny lokace',
    
    // Regions page
    'regions_title': 'Procházet podle regionů',
    'regions_subtitle': 'Vyberte region pro zobrazení všech cannabis lokací',
    'locations_in_cities': 'lokací v {count} městech',
    
    // Categories page
    'categories_title': 'Procházet podle kategorií',
    'categories_subtitle': 'Vyberte kategorii pro zobrazení všech lokací',
    'locations_count': 'lokací',
    
    // Category names
    'cat_cbd_shops': 'CBD Obchody',
    'cat_seed_banks': 'Seed Banky & Grow Shopy',
    'cat_online_shops': 'Online E-shopy',
    'cat_medical': 'Lékárny',
    'cat_delivery': 'Rozvozové služby',
    'cat_social': 'Sociální kluby',
    
    // Business categories
    'category_cbd_retail': 'CBD Retail Shop',
    'category_seeds_grow': 'Seeds & Grow Shop',
    'category_ecommerce': 'E-commerce Platform',
    'category_medical': 'Medical Cannabis',
    'category_delivery': 'Delivery Service',
    'category_social': 'Social Club & Event',
    
    // City pages
    'cannabis_in': 'Cannabis v',
    'locations_in_region': 'lokací v regionu',
    'filter_label': 'Filtr:',
    'filter_all_categories': 'Všechny kategorie',
    'no_results': 'Nenalezeny žádné výsledky',
    
    // Business detail
    'breadcrumb_home': 'Domů',
    'contact_info': '📍 Kontaktní informace',
    'label_address': 'Adresa:',
    'label_city': 'Město:',
    'label_phone': 'Telefon:',
    'label_email': 'Email:',
    'label_website': 'Web:',
    'label_hours': 'Otevírací doba:',
    'section_products': '🌿 Produkty',
    'section_services': '✨ Služby',
    'section_notes': 'ℹ️ Poznámky',
    'btn_show_all_city': 'Zobrazit všechny obchody v',
    
    // Badges
    'badge_online_shop': 'Online Shop',
    'badge_delivery': 'Rozvoz',
    'tag_delivery': '🚚 Rozvoz',
    'tag_eshop': '🛒 E-shop',
    
    // Footer
    'footer_about': 'Kompletní adresář cannabis obchodů, lékáren a služeb v České republice.',
    'footer_categories': 'Kategorie',
    'footer_regions': 'Regiony',
    'footer_about_section': 'O nás',
    'footer_about_project': 'O projektu',
    'footer_contact': 'Kontakt',
    'footer_copyright': '© 2025 Weed.cz - Cannabis Directory České Republiky',
    
    // Language
    'language': 'Jazyk',
    'lang_czech': 'Čeština',
    'lang_english': 'English'
  },
  
  en: {
    // Header
    'site_tagline': '🌿 Complete database of 144+ cannabis locations in Czech Republic',
    'search_placeholder': 'Search shops, products, cities...',
    'btn_regions': 'Regions',
    'btn_categories': 'Categories',
    
    // Navigation
    'nav_home': 'Home',
    'nav_regions': 'Regions',
    'nav_categories': 'Categories',
    'nav_cbd_shops': 'CBD Shops',
    'nav_seed_banks': 'Seed Banks',
    'nav_grow_shops': 'Grow Shops',
    'nav_medical': 'Pharmacies',
    'nav_blog': 'Blog',
    'section_blog': '📝 Cannabis Guide',
    'section_blog_subtitle': 'Comprehensive articles about cannabis in Czech Republic',
    'btn_all_articles': 'All articles',
    
    // Homepage
    'hero_title': '🌿 Find Cannabis in Czech Republic',
    'hero_subtitle': 'Complete directory of CBD shops, seed banks, grow shops, pharmacies and cannabis services',
    'btn_browse_regions': 'Browse by regions',
    'btn_browse_categories': 'Browse by categories',
    'stat_total': 'Total locations',
    'stat_cbd': 'CBD Shops',
    'stat_ecommerce': 'E-commerce',
    'stat_seeds': 'Seed & Grow',
    'section_latest': 'Latest additions',
    'section_latest_subtitle': 'Discover the newest cannabis shops and services',
    'btn_show_all': 'Show all locations',
    
    // Regions page
    'regions_title': 'Browse by regions',
    'regions_subtitle': 'Select a region to view all cannabis locations',
    'locations_in_cities': 'locations in {count} cities',
    
    // Categories page
    'categories_title': 'Browse by categories',
    'categories_subtitle': 'Select a category to view all locations',
    'locations_count': 'locations',
    
    // Category names
    'cat_cbd_shops': 'CBD Shops',
    'cat_seed_banks': 'Seed Banks & Grow Shops',
    'cat_online_shops': 'Online E-shops',
    'cat_medical': 'Pharmacies',
    'cat_delivery': 'Delivery Services',
    'cat_social': 'Social Clubs',
    
    // Business categories
    'category_cbd_retail': 'CBD Retail Shop',
    'category_seeds_grow': 'Seeds & Grow Shop',
    'category_ecommerce': 'E-commerce Platform',
    'category_medical': 'Medical Cannabis',
    'category_delivery': 'Delivery Service',
    'category_social': 'Social Club & Event',
    
    // City pages
    'cannabis_in': 'Cannabis in',
    'locations_in_region': 'locations in',
    'filter_label': 'Filter:',
    'filter_all_categories': 'All categories',
    'no_results': 'No results found',
    
    // Business detail
    'breadcrumb_home': 'Home',
    'contact_info': '📍 Contact Information',
    'label_address': 'Address:',
    'label_city': 'City:',
    'label_phone': 'Phone:',
    'label_email': 'Email:',
    'label_website': 'Website:',
    'label_hours': 'Opening hours:',
    'section_products': '🌿 Products',
    'section_services': '✨ Services',
    'section_notes': 'ℹ️ Notes',
    'btn_show_all_city': 'Show all shops in',
    
    // Badges
    'badge_online_shop': 'Online Shop',
    'badge_delivery': 'Delivery',
    'tag_delivery': '🚚 Delivery',
    'tag_eshop': '🛒 E-shop',
    
    // Footer
    'footer_about': 'Complete directory of cannabis shops, pharmacies and services in Czech Republic.',
    'footer_categories': 'Categories',
    'footer_regions': 'Regions',
    'footer_about_section': 'About',
    'footer_about_project': 'About project',
    'footer_contact': 'Contact',
    'footer_copyright': '© 2025 Weed.cz - Cannabis Directory of Czech Republic',
    
    // Language
    'language': 'Language',
    'lang_czech': 'Čeština',
    'lang_english': 'English'
  }
};

// Get translation
function t(key, lang = null) {
  if (!lang) {
    lang = getCurrentLanguage();
  }
  return TRANSLATIONS[lang][key] || key;
}

// Get current language from URL or localStorage
function getCurrentLanguage() {
  // Check URL parameter
  const urlParams = new URLSearchParams(window.location.search);
  const urlLang = urlParams.get('lang');
  if (urlLang && (urlLang === 'cs' || urlLang === 'en')) {
    localStorage.setItem('weed_cz_lang', urlLang);
    return urlLang;
  }
  
  // Check localStorage
  const storedLang = localStorage.getItem('weed_cz_lang');
  if (storedLang) {
    return storedLang;
  }
  
  // Default to Czech
  return 'cs';
}

// Set language
function setLanguage(lang) {
  localStorage.setItem('weed_cz_lang', lang);
  
  // Update URL without reload
  const url = new URL(window.location);
  url.searchParams.set('lang', lang);
  window.history.replaceState({}, '', url);
  
  // Translate page
  translatePage(lang);
}

// Translate page content
function translatePage(lang) {
  // Translate elements with data-i18n attribute
  document.querySelectorAll('[data-i18n]').forEach(element => {
    const key = element.getAttribute('data-i18n');
    const translation = t(key, lang);
    
    if (element.tagName === 'INPUT' && element.type === 'text') {
      element.placeholder = translation;
    } else {
      element.textContent = translation;
    }
  });
  
  // Update language switcher
  document.querySelectorAll('.lang-switch').forEach(btn => {
    btn.classList.remove('active');
  });
  document.querySelector(`.lang-switch[data-lang="${lang}"]`)?.classList.add('active');
  
  // Update HTML lang attribute
  document.documentElement.lang = lang;
}

// Initialize language on page load
document.addEventListener('DOMContentLoaded', function() {
  const currentLang = getCurrentLanguage();
  translatePage(currentLang);
  
  // Add language switcher event listeners
  document.querySelectorAll('.lang-switch').forEach(btn => {
    btn.addEventListener('click', function() {
      const lang = this.getAttribute('data-lang');
      setLanguage(lang);
    });
  });
});
